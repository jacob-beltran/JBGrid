var JBGrid=(function(){'use strict';function g(){this.sizes=['xs','s','m','l','xl'];this.sizesMin={'xs':0,'s':20,'m':35,'l':60,'xl':80};this.sizesMax={'xs':20,'s':35,'m':60,'l':80,'xl':10000}}g.prototype.isJquery=function(a){if(typeof jQuery!=='undefined'){return(a instanceof jQuery)}return false};g.prototype.isElement=function(a){try{return a instanceof HTMLElement}catch(e){return(typeof a==="object")&&(a.nodeType===1)&&(typeof a.style==="object")&&(typeof a.ownerDocument==="object")}};g.prototype.absoluteLeft=function(a){var b=0;do{if(!isNaN(a.offsetLeft)){b+=a.offsetLeft}}while((a=a.offsetParent)!==null);return b};g.prototype.absoluteTop=function(a){var b=0;do{if(!isNaN(a.offsetTop)){b+=a.offsetTop}}while((a=a.offsetParent)!==null);return b};g.prototype.setAspectRatio=function(a,b){var d=a.offsetWidth;var h=null;if(b==="square"){h=Math.round(d)}else if(b){var f=b.split(/[x\/\|\-\:]/);var i=parseFloat(f[1])/parseFloat(f[0]);h=Math.round(d*i)}if(h){a.style.height=h+'px'}};g.prototype.findAspectRatio=function(){var a=document.getElementsByTagName('html')[0];var b=window.getComputedStyle(a).getPropertyValue('font-size');var d=parseInt(b.replace(/px$/,''));var h=window.innerWidth;var f=document.querySelectorAll('[data-aspectratio]');for(var i=f.length-1;i>=0;i--){var j=f[i];var k=j.getAttribute('data-aspectratio');this.setAspectRatio(j,k)}for(var c=0;c<this.sizes.length;c++){var m=this.sizes[c];var o=this.sizesMin[m]*d;var l=this.sizesMax[m]*d;var r=document.querySelectorAll('[data-aspectratio-'+m+']');if(h>=o){for(var p=r.length-1;p>=0;p--){var n=r[p];n.style.height='';var t=n.getAttribute('data-aspectratio-'+m);this.setAspectRatio(n,t)}}}};g.prototype.setFilledRowHeight=function(){var a=document.getElementsByTagName('html')[0];var b=window.getComputedStyle(a).getPropertyValue('font-size');var d=parseInt(b.replace(/px$/,''));var h=window.innerWidth;var f=document.querySelectorAll('.row.fill-height');for(var i=f.length-1;i>=0;i--){var j=f[i];var k=0;var c=j.children;for(var m=c.length-1;m>=0;m--){var o=c[m];o.style.height='';if(o.offsetHeight>k){k=Math.round(o.offsetHeight)}}for(var l=c.length-1;l>=0;l--){var r=c[l];r.style.height=k+'px'}}for(var p=0;p<this.sizes.length;p++){var n=this.sizes[p];var t=this.sizesMin[n]*d;var w=this.sizesMax[n]*d;var z=document.querySelectorAll('.row.fill-height-'+n);if(h>=t){for(var A=z.length-1;A>=0;A--){var x=z[A];var u=0;var s=x.children;var q;for(var y=s.length-1;y>=0;y--){q=s[y];q.style.height='';if(q.offsetHeight>u){u=Math.round(q.offsetHeight)}}for(var v=s.length-1;v>=0;v--){q=s[v];q.style.height=u+'px'}}}}};g.prototype.fluidHeight=function(a){if(this.isJquery(a)){a.css('min-height',a.css('height'));a.css('height','')}else if(this.isElement(a)){a.style.minHeight=a.style.height;a.style.height=''}else if(a){items=document.querySelectorAll(a);for(var b=items.length-1;b>=0;b--){item=items[b];item.style.minHeight=item.style.height;item.style.height=''}}};g.prototype.initSticky=function(){var a,b,d;var h=['.sticky'];var f;for(var i=this.sizes.length-1;i>=0;i--){f=this.sizes[i];h.push('.sticky-'+f)}a=document.querySelectorAll(h.join(','));for(var j=a.length-1;j>=0;j--){b=a[j];d=b.cloneNode(true);d.className=d.className.replace(/(?:^|\s)sticky(?!\S)/,'');for(var k=this.sizes.length-1;k>=0;k--){f=this.sizes[k];d.className=d.className.replace('sticky-'+f,'')}d.className=d.className+' sticky-clone';d.style.display='none';if(b.nextSibling){b.parentNode.insertBefore(d,b.nextSibling)}else{b.parentNode.appendChild(d)}}};g.prototype.setSticky=function(){var a=document.getElementsByTagName('html')[0];var b=window.getComputedStyle(a).getPropertyValue('font-size');var d=parseInt(b.replace(/px$/,''));var h=window.innerWidth;var f=window.pageYOffset||document.documentElement.scrollTop;var i=false;var j=[];var k=[];var c,m,o,l,r;var p=document.querySelectorAll('.sticky');for(var n=p.length-1;n>=0;n--){c=p[n];o=this.absoluteTop(c);l=0;if(c.getAttribute('data-sticky-top')){l=parseInt(c.getAttribute('data-sticky-top'))}r=f+l;if(o<=r){j.push(c)}else{k.push(c)}}for(var t=0;t<this.sizes.length;t++){var w=this.sizes[t];var z=this.sizesMin[w]*d;var A=this.sizesMax[w]*d;var x=document.querySelectorAll('.sticky-'+w);if(h>=z){for(var u=x.length-1;u>=0;u--){c=x[u];o=this.absoluteTop(c);l=0;if(c.getAttribute('data-sticky-top-'+w)){l=parseInt(c.getAttribute('data-sticky-top-'+w))}else if(c.getAttribute('data-sticky-top')){l=parseInt(c.getAttribute('data-sticky-top'))}r=f+l;if(o<=r){j.push(c)}else{k.push(c)}}}else{for(var s=x.length-1;s>=0;s--){c=x[s];k.push(c)}}}for(var q=k.length-1;q>=0;q--){c=k[q];var y=false;for(var v=j.length-1;v>=0;v--){m=j[v];if(c===m){y=true}}if(!y){this.clearSticky(c)}}for(var B=j.length-1;B>=0;B--){c=j[B];this.makeSticky(c)}};g.prototype.makeSticky=function(a){var b=a.nextSibling;var d=this.absoluteLeft(a);var h=0;if(a.getAttribute('data-sticky-top')){h=parseInt(a.getAttribute('data-sticky-top'))}else{for(var f=0;f<this.sizes.length;f++){var i=this.sizes[f];if(a.getAttribute('data-sticky-top-'+i)){h=parseInt(a.getAttribute('data-sticky-top-'+i))}}}a.style.visibility='hidden';b.style.display='block';b.style.width=Math.round(a.offsetWidth)+'px';b.style.position='fixed';b.style.top=h+'px';b.style.left=d+'px'};g.prototype.clearSticky=function(a){var b=a.nextSibling;a.style.visibility='';b.style.display='none';b.style.position='';b.style.top='';b.style.left=''};g.prototype.setLayout=function(){this.findAspectRatio();this.setFilledRowHeight();this.setSticky()};g.prototype.init=function(){this.initSticky();this.setLayout();var b=window.onresize;window.onresize=function(){var a=new g();a.setLayout();if(typeof b==="function"){b.call(window)}};var d=window.onscroll;window.onscroll=function(){var a=new g();a.setSticky();if(typeof d==="function"){d.call(window)}}};var C=new g();C.init();return g})();
